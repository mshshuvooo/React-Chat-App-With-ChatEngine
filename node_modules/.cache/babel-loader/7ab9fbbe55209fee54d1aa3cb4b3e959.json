{"ast":null,"code":"var _jsxFileName = \"/Users/shuvo/Documents/Web-Development/Javascript/React-Serious/unichat-messenger/src/components/Chats.js\";\nimport React from 'react';\nimport { useAuth } from '../contexts/authContext';\nimport { useNavigate } from \"react-router-dom\";\nimport { ChatEngine } from 'react-chat-engine';\nimport { auth } from '../FirebaseConfig';\nimport { useEffect, useState } from 'react/cjs/react.development';\nimport axios from 'axios';\n\nconst Chats = () => {\n  const {\n    user\n  } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  const getFile = async url => {\n    const response = await fetch(url);\n    const data = await response.blob();\n    return new File([data], \"user-photo.jpg\", {\n      type: 'image/jpeg'\n    });\n  };\n\n  const handleLogOut = async () => {\n    await auth.signOut();\n    navigate(`/`);\n  };\n\n  useEffect(() => {\n    if (!user) {\n      navigate(`/`);\n      return;\n    }\n\n    axios.get('https://api.chatengine.io/users/me', {\n      headers: {\n        \"project-id\": process.env.REACT_APP_CHAT_ENGINE_ID,\n        \"user-name\": user.email,\n        \"user-secret\": user.uid\n      }\n    }).then(() => {\n      setLoading(false);\n    }).catch(() => {\n      let formDeta = new FormData();\n      formDeta.append('email', user.email);\n      formDeta.append('username', user.email);\n      formDeta.append('secret', user.uid);\n      getFile(user.photoURL).then(avatar => {\n        formDeta.append('avatar', avatar, avatar.name);\n        axios.post('https://api.chatengine.io/users', formDeta, {\n          headers: {\n            'private-key': process.env.REACT_APP_CHAT_ENGINE_KEY\n          }\n        }).then(() => setLoading(false)).catch(err => console.log(err));\n      });\n    });\n  }, [user, navigate]);\n\n  if (!user || loading) {\n    return 'Loading';\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nav-bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logo-tab\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, \"Unichat\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logout-tab\",\n    onClick: handleLogOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, \"Log Out\")), /*#__PURE__*/React.createElement(ChatEngine, {\n    height: \"calc(100vh -66px)\",\n    projectID: process.env.REACT_APP_CHAT_ENGINE_ID,\n    userName: user.email,\n    userSecret: user.uid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default Chats;","map":{"version":3,"sources":["/Users/shuvo/Documents/Web-Development/Javascript/React-Serious/unichat-messenger/src/components/Chats.js"],"names":["React","useAuth","useNavigate","ChatEngine","auth","useEffect","useState","axios","Chats","user","loading","setLoading","navigate","getFile","url","response","fetch","data","blob","File","type","handleLogOut","signOut","get","headers","process","env","REACT_APP_CHAT_ENGINE_ID","email","uid","then","catch","formDeta","FormData","append","photoURL","avatar","name","post","REACT_APP_CHAT_ENGINE_KEY","err","console","log"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,yBAAxB;AACA,SAAQC,WAAR,QAA0B,kBAA1B;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,6BAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,KAAK,GAAG,MAAM;AAChB,QAAM;AAACC,IAAAA;AAAD,MAASR,OAAO,EAAtB;AACA,QAAM,CAACS,OAAD,EAAUC,UAAV,IAAwBL,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAMM,QAAQ,GAAGV,WAAW,EAA5B;;AACA,QAAMW,OAAO,GAAG,MAAOC,GAAP,IAAe;AAC3B,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAD,CAA5B;AACA,UAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAnB;AACA,WAAO,IAAIC,IAAJ,CAAU,CAACF,IAAD,CAAV,EAAkB,gBAAlB,EAAoC;AAAEG,MAAAA,IAAI,EAAE;AAAR,KAApC,CAAP;AACH,GAJD;;AAMA,QAAMC,YAAY,GAAG,YAAY;AAC7B,UAAMjB,IAAI,CAACkB,OAAL,EAAN;AACAV,IAAAA,QAAQ,CAAE,GAAF,CAAR;AACH,GAHD;;AAMAP,EAAAA,SAAS,CAAE,MAAM;AACb,QAAG,CAACI,IAAJ,EAAS;AACLG,MAAAA,QAAQ,CAAE,GAAF,CAAR;AACA;AACH;;AACDL,IAAAA,KAAK,CAACgB,GAAN,CAAW,oCAAX,EAAiD;AAC7CC,MAAAA,OAAO,EAAE;AACL,sBAAeC,OAAO,CAACC,GAAR,CAAYC,wBADtB;AAEL,qBAAclB,IAAI,CAACmB,KAFd;AAGL,uBAAgBnB,IAAI,CAACoB;AAHhB;AADoC,KAAjD,EAMIC,IANJ,CAMU,MAAM;AACZnB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KARD,EAQIoB,KARJ,CAQW,MAAM;AACb,UAAIC,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBzB,IAAI,CAACmB,KAA9B;AACAI,MAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BzB,IAAI,CAACmB,KAAjC;AACAI,MAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BzB,IAAI,CAACoB,GAA/B;AACAhB,MAAAA,OAAO,CAACJ,IAAI,CAAC0B,QAAN,CAAP,CAAuBL,IAAvB,CAA8BM,MAAD,IAAY;AACrCJ,QAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BE,MAA1B,EAAkCA,MAAM,CAACC,IAAzC;AAEA9B,QAAAA,KAAK,CAAC+B,IAAN,CAAW,iCAAX,EAA8CN,QAA9C,EAAwD;AACpDR,UAAAA,OAAO,EAAE;AACL,2BAAgBC,OAAO,CAACC,GAAR,CAAYa;AADvB;AAD2C,SAAxD,EAIGT,IAJH,CAIS,MAAMnB,UAAU,CAAC,KAAD,CAJzB,EAKCoB,KALD,CAKSS,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CALjB;AAMH,OATD;AAUH,KAvBD;AA0BH,GA/BQ,EA+BN,CAAC/B,IAAD,EAAOG,QAAP,CA/BM,CAAT;;AAiCA,MAAG,CAACH,IAAD,IAASC,OAAZ,EAAoB;AAChB,WAAO,SAAP;AACH;;AAED,sBACI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,eAII;AAAK,IAAA,SAAS,EAAC,YAAf;AAA4B,IAAA,OAAO,EAAEW,YAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAJJ,CADJ,eASI,oBAAC,UAAD;AACI,IAAA,MAAM,EAAC,mBADX;AAEI,IAAA,SAAS,EAAGI,OAAO,CAACC,GAAR,CAAYC,wBAF5B;AAGI,IAAA,QAAQ,EAAElB,IAAI,CAACmB,KAHnB;AAII,IAAA,UAAU,EAAEnB,IAAI,CAACoB,GAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATJ,CADJ;AAkBH,CAvED;;AAyEA,eAAerB,KAAf","sourcesContent":["import React from 'react';\nimport { useAuth } from '../contexts/authContext';\nimport {useNavigate} from \"react-router-dom\"\nimport { ChatEngine } from 'react-chat-engine';\nimport { auth } from '../FirebaseConfig';\nimport { useEffect, useState } from 'react/cjs/react.development';\nimport axios from 'axios';\n\nconst Chats = () => {\n    const {user} = useAuth();\n    const [loading, setLoading] = useState(true);\n    const navigate = useNavigate();\n    const getFile = async (url) => {\n        const response = await fetch(url);\n        const data = await response.blob();\n        return new File( [data], \"user-photo.jpg\", { type: 'image/jpeg' } )\n    }\n\n    const handleLogOut = async () => {\n        await auth.signOut();\n        navigate(`/`)\n    }\n\n\n    useEffect( () => {\n        if(!user){\n            navigate(`/`);\n            return;\n        }\n        axios.get( 'https://api.chatengine.io/users/me', {\n            headers: {\n                \"project-id\" : process.env.REACT_APP_CHAT_ENGINE_ID,\n                \"user-name\" : user.email,\n                \"user-secret\" : user.uid\n            }\n        } ).then( () => {\n            setLoading(false);\n        } ).catch( () => {\n            let formDeta = new FormData();\n            formDeta.append('email', user.email);\n            formDeta.append('username', user.email);\n            formDeta.append('secret', user.uid);\n            getFile(user.photoURL).then( (avatar) => {\n                formDeta.append('avatar', avatar, avatar.name);\n\n                axios.post('https://api.chatengine.io/users', formDeta, {\n                    headers: { \n                        'private-key' : process.env.REACT_APP_CHAT_ENGINE_KEY\n                    }\n                }).then( () => setLoading(false) )\n                .catch( (err) => console.log(err) );\n            } )\n        } )\n\n        \n    }, [user, navigate] );\n\n    if(!user || loading){\n        return 'Loading';\n    }\n\n    return (\n        <div className=\"chart-page\">\n            <div className=\"nav-bar\">\n                <div className=\"logo-tab\">\n                    Unichat\n                </div>\n                <div className=\"logout-tab\" onClick={handleLogOut}>\n                    Log Out\n                </div>\n            </div>\n            <ChatEngine \n                height=\"calc(100vh -66px)\"\n                projectID= {process.env.REACT_APP_CHAT_ENGINE_ID}\n                userName={user.email}\n                userSecret={user.uid}\n            />\n        </div>\n    );\n};\n\nexport default Chats;"]},"metadata":{},"sourceType":"module"}